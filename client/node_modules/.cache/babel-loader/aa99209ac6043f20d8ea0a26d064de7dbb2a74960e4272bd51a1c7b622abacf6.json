{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Navbar from'./Navbar';import callAPI from'../../utils/fetchData';import{GetFormsAPI,deleteFormAPI}from'../../utils/APIRoutes';import{useNavigate}from'react-router-dom';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Forms(){var _forms$;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),forms=_useState2[0],setForms=_useState2[1];var toastOptions={position:'bottom-right',autoClose:3000,pauseOnHover:true,theme:'colored',draggable:true};useEffect(function(){var user=JSON.parse(localStorage.getItem('user'));if(!user){navigate('/login');}var fetchForms=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var forms;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callAPI(GetFormsAPI,'GET',user.token);case 2:forms=_context.sent;if(forms.status===true){setForms(forms.forms);}else if(forms.statusCode==404){setForms([{msg:'No Forms Found, Please create one'}]);}else{localStorage.removeItem('user');navigate('/login');}case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchForms(){return _ref.apply(this,arguments);};}();fetchForms();},[]);var deleteForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(formId){var user,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:user=JSON.parse(localStorage.getItem('user'));_context2.next=3;return callAPI(\"\".concat(deleteFormAPI,\"/\").concat(formId),'DELETE',user.token);case 3:result=_context2.sent;if(result.status===true){toast.success(result.message,toastOptions);setForms(forms.filter(function(form){return form._id!==formId;}));}else{toast.error(result.message,toastOptions);}case 5:case\"end\":return _context2.stop();}},_callee2);}));return function deleteForm(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),((_forms$=forms[0])===null||_forms$===void 0?void 0:_forms$.msg)!==undefined?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"flex items-center justify-center h-screen font-bold text-xl\",children:forms[0].msg})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto mt-4 flex flex-col justify-center items-center\",children:forms.map(function(form){return/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-md w-2/3 px-4 py-3 mb-8 rounded-sm space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-xl\",children:form.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm pl-2\",children:form.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4 text-white flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"outline-0 bg-red-400 hover:bg-red-600 px-4 py-1 rounded-sm\",onClick:function onClick(){return deleteForm(form._id);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-violet-500 hover:bg-violet-600 px-3 py-1 rounded-sm\",onClick:function onClick(){return navigate(\"/forms/edit/\".concat(form._id));},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-violet-500 hover:bg-violet-600 px-3 py-1 rounded-sm\",onClick:function onClick(){return navigate(\"/forms/\".concat(form._id));},children:\"View\"})]})]},form._id);})}),/*#__PURE__*/_jsx(ToastContainer,{})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Navbar","callAPI","GetFormsAPI","deleteFormAPI","useNavigate","toast","ToastContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Forms","_forms$","navigate","_useState","_useState2","_slicedToArray","forms","setForms","toastOptions","position","autoClose","pauseOnHover","theme","draggable","user","JSON","parse","localStorage","getItem","fetchForms","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","token","sent","status","statusCode","msg","removeItem","stop","apply","arguments","deleteForm","_ref2","_callee2","formId","result","_callee2$","_context2","concat","success","message","filter","form","_id","error","_x","children","undefined","className","map","title","description","onClick"],"sources":["C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/src/components/pages/Forms.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Navbar from './Navbar';\r\nimport callAPI from '../../utils/fetchData';\r\nimport { GetFormsAPI, deleteFormAPI } from '../../utils/APIRoutes';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nexport default function Forms() {\r\n    const navigate = useNavigate();\r\n    const [forms, setForms] = useState([]);\r\n\r\n    const toastOptions = {\r\n        position: 'bottom-right',\r\n        autoClose: 3000,\r\n        pauseOnHover: true,\r\n        theme: 'colored',\r\n        draggable: true,\r\n    };\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem('user'));\r\n        if (!user) {\r\n            navigate('/login');\r\n        }\r\n        const fetchForms = async () => {\r\n            const forms = await callAPI(GetFormsAPI, 'GET', user.token);\r\n            if (forms.status === true) {\r\n                setForms(forms.forms);\r\n            } else if (forms.statusCode == 404) {\r\n                setForms([{ msg: 'No Forms Found, Please create one' }]);\r\n            } else {\r\n                localStorage.removeItem('user');\r\n                navigate('/login');\r\n            }\r\n        };\r\n        fetchForms();\r\n    }, []);\r\n\r\n    const deleteForm = async (formId) => {\r\n        const user = JSON.parse(localStorage.getItem('user'));\r\n        const result = await callAPI(\r\n            `${deleteFormAPI}/${formId}`,\r\n            'DELETE',\r\n            user.token\r\n        );\r\n        if (result.status === true) {\r\n            toast.success(result.message, toastOptions);\r\n            setForms(forms.filter((form) => form._id !== formId));\r\n        } else {\r\n            toast.error(result.message, toastOptions);\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            <Navbar />\r\n\r\n            {forms[0]?.msg !== undefined ? (\r\n                <div>\r\n                    <h1 className=\"flex items-center justify-center h-screen font-bold text-xl\">\r\n                        {forms[0].msg}\r\n                    </h1>\r\n                </div>\r\n            ) : (\r\n                <div>\r\n                    <div className=\"container mx-auto mt-4 flex flex-col justify-center items-center\">\r\n                        {forms.map((form) => {\r\n                            return (\r\n                                <div\r\n                                    key={form._id}\r\n                                    className=\"shadow-md w-2/3 px-4 py-3 mb-8 rounded-sm space-y-4\"\r\n                                >\r\n                                    <h2 className=\"font-bold text-xl\">\r\n                                        {form.title}\r\n                                    </h2>\r\n                                    <p className=\"text-gray-500 text-sm pl-2\">\r\n                                        {form.description}\r\n                                    </p>\r\n                                    <div className=\"flex justify-end gap-4 text-white flex-wrap\">\r\n                                        <button\r\n                                            className=\"outline-0 bg-red-400 hover:bg-red-600 px-4 py-1 rounded-sm\"\r\n                                            onClick={() => deleteForm(form._id)}\r\n                                        >\r\n                                            Delete\r\n                                        </button>\r\n                                        <button\r\n                                            className=\"bg-violet-500 hover:bg-violet-600 px-3 py-1 rounded-sm\"\r\n                                            onClick={() =>\r\n                                                navigate(\r\n                                                    `/forms/edit/${form._id}`\r\n                                                )\r\n                                            }\r\n                                        >\r\n                                            Edit\r\n                                        </button>\r\n                                        <button\r\n                                            className=\"bg-violet-500 hover:bg-violet-600 px-3 py-1 rounded-sm\"\r\n                                            onClick={() =>\r\n                                                navigate(`/forms/${form._id}`)\r\n                                            }\r\n                                        >\r\n                                            View\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                    <ToastContainer />\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}