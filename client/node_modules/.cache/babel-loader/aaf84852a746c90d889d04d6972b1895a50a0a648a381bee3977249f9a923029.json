{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import{PlusCircleIcon,TrashIcon}from'@heroicons/react/outline';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{GetFormAPI}from'../../utils/APIRoutes';import callAPI from'../../utils/fetchData';import Navbar from'./Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function EditForm(_ref){var setFormData=_ref.setFormData;var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var toastOptions={position:'bottom-right',autoClose:5000,pauseOnHover:true,theme:'colored',draggable:true};var _useState=useState('Untitled Form'),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState('Form Description'),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),formContent=_useState6[0],setFormContent=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),onEdit=_useState8[0],setOnEdit=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),textField=_useState10[0],setTextField=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),editedField=_useState12[0],setEditedField=_useState12[1];// let user;\nuseEffect(function(){var user=JSON.parse(localStorage.getItem('user'));if(!user){navigate('/login');}var fetchForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var form;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return callAPI(\"\".concat(GetFormAPI,\"/\").concat(id),'GET',user.token);case 2:form=_context.sent;if(form.status==true){setTitle(form.form.title);setDescription(form.form.description);setFormContent(form.form.formFields);}case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchForm(){return _ref2.apply(this,arguments);};}();fetchForm();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[' ',/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto                                                                                                                    flex flex-col justify-start items-center px-4 h-screen w-4/5 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col px-4 bg-white rounded-md justify-center item-start w-full shadow-sm border-indigo-800 border-t-8 space-y-2 h-24\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"text-3xl font-semibold\",placeholder:\"\",value:title,readOnly:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"text-gray-500/80 w-full\",value:description,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" relative flex flex-col w-full space-y-4\",children:[formContent.map(function(field){return/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-white flex w-full shadow-md px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block text-sm font-medium text-gray-700 capitalize\",children:onEdit&&editedField===field.name?/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"border border-black\",value:field.label,readOnly:true}):/*#__PURE__*/_jsx(\"label\",{children:field.label})},field.name),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:field.question_type})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4 w-full\",children:[field.question_type=='short_answer'&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"px-5 shadow-sm h-10 rounded-md block w-full\",placeholder:field.label,readOnly:true}),field.question_type=='paragraph'&&/*#__PURE__*/_jsx(\"textarea\",{rows:4,className:\"px-5 shadow-sm h-10 rounded-md block w-full\",placeholder:field.label,readOnly:true}),field.question_type=='multichoice'&&/*#__PURE__*/_jsx(\"div\",{className:\"my-4 flex flex-col space-y-2\",children:/*#__PURE__*/_jsx(\"select\",{className:\"px-5 shadow-sm h-10 rounded-md block w-full\",children:field.list.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item);})})})]})]})},field.name);}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-indigo-600 px-4 py-2 hover:bg-indigo-700 rounded-md text-white\",type:\"submit\",onClick:function onClick(e){return navigate(\"/forms/edit/\".concat(id));},children:\"Edit\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useParams","PlusCircleIcon","TrashIcon","toast","ToastContainer","GetFormAPI","callAPI","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditForm","_ref","setFormData","_useParams","id","navigate","toastOptions","position","autoClose","pauseOnHover","theme","draggable","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","description","setDescription","_useState5","_useState6","formContent","setFormContent","_useState7","_useState8","onEdit","setOnEdit","_useState9","_useState10","textField","setTextField","_useState11","_useState12","editedField","setEditedField","user","JSON","parse","localStorage","getItem","fetchForm","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","form","wrap","_callee$","_context","prev","next","concat","token","sent","status","formFields","stop","apply","arguments","children","className","type","placeholder","value","readOnly","map","field","name","label","question_type","rows","list","item","onClick","e"],"sources":["C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/src/components/pages/ViewForm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport { PlusCircleIcon, TrashIcon } from '@heroicons/react/outline';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { GetFormAPI } from '../../utils/APIRoutes';\r\nimport callAPI from '../../utils/fetchData';\r\nimport Navbar from './Navbar';\r\n\r\nexport default function EditForm({ setFormData }) {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const toastOptions = {\r\n        position: 'bottom-right',\r\n        autoClose: 5000,\r\n        pauseOnHover: true,\r\n        theme: 'colored',\r\n        draggable: true,\r\n    };\r\n    const [title, setTitle] = useState('Untitled Form');\r\n    const [description, setDescription] = useState('Form Description');\r\n    const [formContent, setFormContent] = useState([]);\r\n    const [onEdit, setOnEdit] = useState(false);\r\n    const [textField, setTextField] = useState('');\r\n    const [editedField, setEditedField] = useState('');\r\n\r\n    // let user;\r\n    useEffect(() => {\r\n        const user = JSON.parse(localStorage.getItem('user'));\r\n        if (!user) {\r\n            navigate('/login');\r\n        }\r\n\r\n        const fetchForm = async () => {\r\n            const form = await callAPI(\r\n                `${GetFormAPI}/${id}`,\r\n                'GET',\r\n                user.token\r\n            );\r\n            if (form.status == true) {\r\n                setTitle(form.form.title);\r\n                setDescription(form.form.description);\r\n                setFormContent(form.form.formFields);\r\n            }\r\n        };\r\n        fetchForm();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {' '}\r\n            <Navbar />\r\n            <div className=\"container mx-auto                                                                                                                    flex flex-col justify-start items-center px-4 h-screen w-4/5 space-y-4\">\r\n                <div className=\"flex flex-col px-4 bg-white rounded-md justify-center item-start w-full shadow-sm border-indigo-800 border-t-8 space-y-2 h-24\">\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"text-3xl font-semibold\"\r\n                        placeholder=\"\"\r\n                        value={title}\r\n                        readOnly\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"text-gray-500/80 w-full\"\r\n                        value={description}\r\n                        readOnly\r\n                    />\r\n                </div>\r\n\r\n                <div className=\" relative flex flex-col w-full space-y-4\">\r\n                    {formContent.map((field) => {\r\n                        return (\r\n                            <div\r\n                                key={field.name}\r\n                                className=\"rounded-md bg-white flex w-full shadow-md px-4\"\r\n                            >\r\n                                <div className=\"flex flex-col w-full\">\r\n                                    <div className=\"flex justify-between items-center space-y-2\">\r\n                                        <div\r\n                                            key={field.name}\r\n                                            className=\"block text-sm font-medium text-gray-700 capitalize\"\r\n                                        >\r\n                                            {onEdit &&\r\n                                            editedField === field.name ? (\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    className=\"border border-black\"\r\n                                                    value={field.label}\r\n                                                    readOnly\r\n                                                />\r\n                                            ) : (\r\n                                                <label>{field.label}</label>\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p>{field.question_type}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"my-4 w-full\">\r\n                                        {field.question_type ==\r\n                                            'short_answer' && (\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className=\"px-5 shadow-sm h-10 rounded-md block w-full\"\r\n                                                placeholder={field.label}\r\n                                                readOnly\r\n                                            />\r\n                                        )}\r\n                                        {field.question_type == 'paragraph' && (\r\n                                            <textarea\r\n                                                rows={4}\r\n                                                className=\"px-5 shadow-sm h-10 rounded-md block w-full\"\r\n                                                placeholder={field.label}\r\n                                                readOnly\r\n                                            />\r\n                                        )}\r\n                                        {field.question_type ==\r\n                                            'multichoice' && (\r\n                                            <div className=\"my-4 flex flex-col space-y-2\">\r\n                                                <select className=\"px-5 shadow-sm h-10 rounded-md block w-full\">\r\n                                                    {field.list.map((item) => (\r\n                                                        <option\r\n                                                            key={item}\r\n                                                            value={item}\r\n                                                        >\r\n                                                            {item}\r\n                                                        </option>\r\n                                                    ))}\r\n                                                </select>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                    {/* <div className=\" absolute space-y-1 top-0 -right-16 flex flex-col justify-between items-center bg-white p-2 rounded-md shadow-md\">\r\n                        <button onClick={() => addQuestion()}>\r\n                            <PlusCircleIcon className=\"w-8 h-8 text-gray-400 hover:text-indigo-500\" />\r\n                        </button> */}\r\n                    {/* <button onClick={() => addQuestion()}>\r\n                        <PlusCircleIcon className=\"w-8 h-8 text-gray-400 hover:text-indigo-500\" />\r\n                    </button>\r\n                    <button onClick={() => addQuestion()}>\r\n                        <PlusCircleIcon className=\"w-8 h-8 text-gray-400 hover:text-indigo-500\" />\r\n                    </button> */}\r\n                    {/* </div> */}\r\n                    <button\r\n                        className=\"bg-indigo-600 px-4 py-2 hover:bg-indigo-700 rounded-md text-white\"\r\n                        type=\"submit\"\r\n                        onClick={(e) => navigate(`/forms/edit/${id}`)}\r\n                    >\r\n                        Edit\r\n                    </button>\r\n                </div>\r\n\r\n                <ToastContainer />\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}