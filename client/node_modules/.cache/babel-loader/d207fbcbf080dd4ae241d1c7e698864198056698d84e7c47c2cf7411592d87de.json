{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{ToastContainer,toast}from'react-toastify';import{LoginAPI}from'../../utils/APIRoutes';import'react-toastify/dist/ReactToastify.css';import'../../App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function LoginPage(_ref){var setUser=_ref.setUser;var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var toastOptions={position:'bottom-right',autoClose:5000,pauseOnHover:true,theme:'colored',draggable:true};useEffect(function(){if(localStorage.getItem('user')){navigate('/forms');}});var submitForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!validate()){_context.next=9;break;}_context.next=4;return fetch(LoginAPI,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;if(data.status===true){setUser(data);localStorage.setItem('user',JSON.stringify({token:data.access_token,userId:data.user._id}));navigate('/forms');}else{toast.error(data.message,toastOptions);}case 9:case\"end\":return _context.stop();}},_callee);}));return function submitForm(_x){return _ref2.apply(this,arguments);};}();var validate=function validate(){var regex=/^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;if(!email||!password){toast.error('Email and Password are required.',toastOptions);return false;}else if(regex.test(email)===false){toast.error('Email is not Valid.',toastOptions);return false;}return true;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center m-5-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold\",children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4\",onSubmit:function onSubmit(e){return submitForm(e);},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"sub_btn\",type:\"submit\",children:\"Login\"})})]}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"First time?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Create an account\"}),\".\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Back to Homepage\"}),\".\"]})]})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","ToastContainer","toast","LoginAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","_ref","setUser","navigate","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","toastOptions","position","autoClose","pauseOnHover","theme","draggable","localStorage","getItem","submitForm","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","wrap","_callee$","_context","prev","next","preventDefault","validate","fetch","method","headers","body","JSON","stringify","sent","json","status","setItem","token","access_token","userId","user","_id","error","message","stop","_x","apply","arguments","regex","test","children","className","onSubmit","type","name","onChange","target","value","id","to"],"sources":["C:/Users/heret/OneDrive/Desktop/api/frontend-google-form/src/components/pages/LoginPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport { LoginAPI } from '../../utils/APIRoutes';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport '../../App.css';\r\n\r\nexport default function LoginPage({ setUser }) {\r\n    const navigate = useNavigate();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const toastOptions = {\r\n        position: 'bottom-right',\r\n        autoClose: 5000,\r\n        pauseOnHover: true,\r\n        theme: 'colored',\r\n        draggable: true,\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('user')) {\r\n            navigate('/forms');\r\n        }\r\n    });\r\n    const submitForm = async (e) => {\r\n        e.preventDefault();\r\n        if (validate()) {\r\n            const response = await fetch(LoginAPI, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ email, password }),\r\n            });\r\n            const data = await response.json();\r\n            if (data.status === true) {\r\n                setUser(data);\r\n                localStorage.setItem(\r\n                    'user',\r\n                    JSON.stringify({\r\n                        token: data.access_token,\r\n                        userId: data.user._id,\r\n                    })\r\n                );\r\n\r\n                navigate('/forms');\r\n            } else {\r\n                toast.error(data.message, toastOptions);\r\n            }\r\n        }\r\n    };\r\n    const validate = () => {\r\n        const regex =\r\n            /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n\r\n        if (!email || !password) {\r\n            toast.error('Email and Password are required.', toastOptions);\r\n            return false;\r\n        } else if (regex.test(email) === false) {\r\n            toast.error('Email is not Valid.', toastOptions);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n    return (\r\n        <>\r\n            <div className=\"text-center m-5-auto\">\r\n                <h2 className=\"text-3xl font-bold\">LOGIN</h2>\r\n                <form className=\"space-y-4\" onSubmit={(e) => submitForm(e)}>\r\n                    <p>\r\n                        <label>Email address</label>\r\n                        <br />\r\n                        <input\r\n                            type=\"email\"\r\n                            name=\"email\"\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                        />\r\n                    </p>\r\n                    <p>\r\n                        <label>Password</label>\r\n                        {/* <Link to=\"/forget-password\"><label className=\"right-label\">Forget password?</label></Link> */}\r\n                        <br />\r\n                        <input\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n                    </p>\r\n                    <p>\r\n                        <button id=\"sub_btn\" type=\"submit\">\r\n                            Login\r\n                        </button>\r\n                    </p>\r\n                </form>\r\n\r\n                <footer>\r\n                    <p>\r\n                        First time?{' '}\r\n                        <Link to=\"/register\">Create an account</Link>.\r\n                    </p>\r\n                    <p>\r\n                        <Link to=\"/\">Back to Homepage</Link>.\r\n                    </p>\r\n                </footer>\r\n            </div>\r\n            <ToastContainer />\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}